<!DOCTYPE html>
<html>
    <head>
        <title>MangaUpdates Lists</title>

        <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
        <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.23/css/jquery.dataTables.css">
        <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.js"></script>
        <script src="data.js"></script>
        <script>
            $(document).ready(function() {
                seriesTable = $("#series").DataTable( {
                    data: data,
                    columns: columns
                } );

                function colorCells () {
                    probabilityColumns = [3, 4, 6, 7, 9, 10, 12, 13];
                    $("#series > tbody > tr").each(function() {
                        for (var col of probabilityColumns) {
                            var cell = this.children[col];

                            var color = (1-cell.innerText) * 256;
                            cell.style["backgroundColor"] = "rgb(0,0,"+color+")";
                            cell.style["color"] = "white"
                        }
                    });
                }

                colorCells();
                seriesTable.on('draw', colorCells);
            } );
        </script>
    </head>
    <body>
        <table id="series" class="display" width="100%"></table>
    </body>
</html>
